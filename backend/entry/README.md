# Entry API

REST API for managing financial entries in Micro-Bingo.

---

## Endpoints

### POST `/entry/add`

**Request Body**
```json
{
  "userId": "string",
  "transaction_type": "expense/income",
  "owe": true,
  "tid": "string",                // optional, autogenerated if not provided
  "date": "string (ISO date)",
  "reason": "string",
  "by_who": "string",             // who paid or who received
  "category": "string",
  "amount": 0.0,
  "oweList": [
    {
      "userid": "string",
      "owe_type": "string",
      "amount": 0.0
    }
    // ...
  ]
}
```

**Response**
```json
{
  "userId": "string"
}
```

---

### GET `/entry/list?userId=string&dateFrom=YYYY-MM-DD&dateTo=YYYY-MM-DD`

**Response**
```json
[
  {
    "tid": "string",
    "transaction_type": "string",
    "date": "string",
    "reason": "string",
    "by_who": "string",
    "category": "string",
    "amount": 0.0,
    "oweList": [
      {
        "userid": "string",
        "owe_type": "string",
        "amount": 0.0
      }
      // ...
    ]
  }
  // ...
]
```

---

### GET `/entry/:tid?userId=string`

**Response**
```json
{
  "tid": "string",
  "transaction_type": "string",
  "date": "string",
  "reason": "string",
  "by_who": "string",
  "category": "string",
  "amount": 0.0,
  "oweList": [
    {
      "userid": "string",
      "owe_type": "string",
      "amount": 0.0
    }
    // ...
  ]
}
```

---

### DELETE `/entry/:tid?userId=string`

**Response**
```json
{
  "success": true
}
```

---

## Notes

- All endpoints require `userId` for authentication/authorization.
- The `oweList` field is optional and can be empty.
- Make sure your database is running and the following tables exist:

```sql
CREATE TABLE entries (
  tid VARCHAR(32) PRIMARY KEY,
  user_id VARCHAR(64) NOT NULL,
  transaction_type VARCHAR(32) NOT NULL,
  owe BOOLEAN NOT NULL,
  date DATE NOT NULL,
  reason VARCHAR(255),
  by_who VARCHAR(64),
  category VARCHAR(64),
  amount DOUBLE NOT NULL
);

CREATE TABLE owe_list (
  id INT AUTO_INCREMENT PRIMARY KEY,
  tid VARCHAR(32) NOT NULL,
  userid VARCHAR(64) NOT NULL,
  owe_type VARCHAR(32) NOT NULL,
  amount DOUBLE NOT NULL,
  FOREIGN KEY (tid) REFERENCES entries(tid) ON DELETE CASCADE
);
```
